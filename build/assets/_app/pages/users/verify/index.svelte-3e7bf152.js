import{S as s,i as e,s as a,j as r,m as t,o as n,v as o,r as c,w as i,z as u,I as l,J as p,e as $,k as f,c as m,a as d,n as h,d as g,b as w,f as y,D as b,E as k,K as x,L as j,t as v,g as P}from"../../../chunks/vendor-483ca6b6.js";import{g as q}from"../../../chunks/navigation-20968cc5.js";import{c as E,a as I,b as S}from"../../../chunks/auth-c13ad024.js";import{B as T}from"../../../chunks/store-97111950.js";import{m as C}from"../../../chunks/store-b327666d.js";import{I as O}from"../../../chunks/Input-ac9b94d3.js";import{S as z}from"../../../chunks/Section-69710e66.js";import"../../../chunks/singletons-bb9012b7.js";import"../../../chunks/store-a8f0f898.js";function B(s){let e;return{c(){e=v("Change")},l(s){e=P(s,"Change")},m(s,a){y(s,e,a)},d(s){s&&g(e)}}}function D(s){let e,a,u,v,P,q,E,I,S,C,z;function D(e){s[4](e)}let F={label:"Password",type:"password",placeholder:"Password"};function J(e){s[5](e)}void 0!==s[0]&&(F.value=s[0]),a=new O({props:F}),l.push((()=>p(a,"value",D)));let K={label:"Password ( retype )",type:"password",placeholder:"Password ( retype )"};return void 0!==s[1]&&(K.value=s[1]),P=new O({props:K}),l.push((()=>p(P,"value",J))),I=new T({props:{type:"submit",$$slots:{default:[B]},$$scope:{ctx:s}}}),{c(){e=$("form"),r(a.$$.fragment),v=f(),r(P.$$.fragment),E=f(),r(I.$$.fragment),this.h()},l(s){e=m(s,"FORM",{class:!0});var r=d(e);t(a.$$.fragment,r),v=h(r),t(P.$$.fragment,r),E=h(r),t(I.$$.fragment,r),r.forEach(g),this.h()},h(){w(e,"class","flex flex-col space-y-[16px] max-w-[500px] w-full mx-auto")},m(r,t){y(r,e,t),n(a,e,null),b(e,v),n(P,e,null),b(e,E),n(I,e,null),S=!0,C||(z=k(e,"submit",x(s[2])),C=!0)},p(s,e){const r={};!u&&1&e&&(u=!0,r.value=s[0],j((()=>u=!1))),a.$set(r);const t={};!q&&2&e&&(q=!0,t.value=s[1],j((()=>q=!1))),P.$set(t);const n={};64&e&&(n.$$scope={dirty:e,ctx:s}),I.$set(n)},i(s){S||(o(a.$$.fragment,s),o(P.$$.fragment,s),o(I.$$.fragment,s),S=!0)},o(s){c(a.$$.fragment,s),c(P.$$.fragment,s),c(I.$$.fragment,s),S=!1},d(s){s&&g(e),i(a),i(P),i(I),C=!1,z()}}}function F(s){let e,a;return e=new z({props:{class:"items-center justify-center",$$slots:{default:[D]},$$scope:{ctx:s}}}),{c(){r(e.$$.fragment)},l(s){t(e.$$.fragment,s)},m(s,r){n(e,s,r),a=!0},p(s,[a]){const r={};67&a&&(r.$$scope={dirty:a,ctx:s}),e.$set(r)},i(s){a||(o(e.$$.fragment,s),a=!0)},o(s){c(e.$$.fragment,s),a=!1},d(s){i(e,s)}}}async function J({page:s}){let{query:e}=s;return e=Object.fromEntries(e),{props:{query:e}}}function K(s,e,a){let{query:r}=e,t="",n="";return u((()=>{})),s.$$set=s=>{"query"in s&&a(3,r=s.query)},[t,n,async()=>{if(""===t.replace(/\s/g,"")||""===n.replace(/\s/g,""))return C.error.show("Passwords cannot be blank.  Please try again.");if(t!==n)return C.error.show("New passwords do not match.  Please try again.");C.spinner.show();let s=await E(r.accessToken,"Ennis01",t);const{email:e}=s.user;if(s=await I.signin({email:e,password:t}),s.error&&(C.spinner.hide(),C.error.show(s.error)),s.accessToken){const{accessToken:e}=s,a=await S(e);C.spinner.hide(),q(a)}},r,function(s){t=s,a(0,t)},function(s){n=s,a(1,n)}]}export default class extends s{constructor(s){super(),e(this,s,K,F,a,{query:3})}}export{J as load};
