var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{S as r,i as n,s as o,j as c,m as u,o as f,v as i,r as $,w as m,z as p,e as d,k as h,l as g,c as b,a as v,d as y,n as j,b as w,f as k,B as x,u as O,D as S,E as q,K as _,H as E,t as B,g as I,I as P,J as N,L as A}from"../../../chunks/vendor-483ca6b6.js";import{s as C}from"../../../chunks/auth-c13ad024.js";import{c as D}from"../../../chunks/_columns-4962c75d.js";import{B as H}from"../../../chunks/store-97111950.js";import{B as U}from"../../../chunks/Back-7e1bfb8e.js";import{C as z,S as F}from"../../../chunks/Spinner-460fa24f.js";import{S as J}from"../../../chunks/Select-2b3a6ae9.js";import{m as K}from"../../../chunks/store-b327666d.js";import{I as L}from"../../../chunks/Input-ac9b94d3.js";import{S as M}from"../../../chunks/Section-69710e66.js";import"../../../chunks/store-a8f0f898.js";function R(e,t,a){const l=e.slice();return l[9]=t[a],l[10]=t,l[11]=a,l}function T(e){let t,a;return t=new z({props:{$$slots:{default:[G]},$$scope:{ctx:e}}}),{c(){c(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,l){f(t,e,l),a=!0},p(e,a){const l={};4096&a&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){a||(i(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){m(t,e)}}}function V(e){let t,a,l,s,r,n,o=Object.keys(e[0]),p=[];for(let c=0;c<o.length;c+=1)p[c]=X(R(e,o,c));const g=e=>$(p[e],1,1,(()=>{p[e]=null}));return l=new H({props:{type:"submit",$$slots:{default:[Y]},$$scope:{ctx:e}}}),{c(){t=d("form");for(let e=0;e<p.length;e+=1)p[e].c();a=h(),c(l.$$.fragment),this.h()},l(e){t=b(e,"FORM",{class:!0});var s=v(t);for(let t=0;t<p.length;t+=1)p[t].l(s);a=j(s),u(l.$$.fragment,s),s.forEach(y),this.h()},h(){w(t,"class","flex flex-col mt-[24px] space-y-[16px] max-w-[500px] w-full mx-auto")},m(o,c){k(o,t,c);for(let e=0;e<p.length;e+=1)p[e].m(t,null);S(t,a),f(l,t,null),s=!0,r||(n=q(t,"submit",_(e[3])),r=!0)},p(e,s){if(5&s){let l;for(o=Object.keys(e[0]),l=0;l<o.length;l+=1){const r=R(e,o,l);p[l]?(p[l].p(r,s),i(p[l],1)):(p[l]=X(r),p[l].c(),i(p[l],1),p[l].m(t,a))}for(x(),l=o.length;l<p.length;l+=1)g(l);O()}const r={};4096&s&&(r.$$scope={dirty:s,ctx:e}),l.$set(r)},i(e){if(!s){for(let e=0;e<o.length;e+=1)i(p[e]);i(l.$$.fragment,e),s=!0}},o(e){p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)$(p[t]);$(l.$$.fragment,e),s=!1},d(e){e&&y(t),E(p,e),m(l),r=!1,n()}}}function G(e){let t,a;return t=new F({}),{c(){c(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,l){f(t,e,l),a=!0},i(e){a||(i(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){m(t,e)}}}function Q(e){let t,a,l;function s(t){e[6](t,e[9])}let r={label:e[0][e[9]].label,multiple:e[0][e[9]].multiple,placeholder:e[0][e[9]].placeholder,options:e[2][e[9]]};return void 0!==e[0][e[9]].value&&(r.value=e[0][e[9]].value),t=new J({props:r}),P.push((()=>N(t,"value",s))),{c(){c(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){f(t,e,a),l=!0},p(l,s){e=l;const r={};1&s&&(r.label=e[0][e[9]].label),1&s&&(r.multiple=e[0][e[9]].multiple),1&s&&(r.placeholder=e[0][e[9]].placeholder),5&s&&(r.options=e[2][e[9]]),!a&&1&s&&(a=!0,r.value=e[0][e[9]].value,A((()=>a=!1))),t.$set(r)},i(e){l||(i(t.$$.fragment,e),l=!0)},o(e){$(t.$$.fragment,e),l=!1},d(e){m(t,e)}}}function W(e){let t,a,l;function s(t){e[5](t,e[9])}let r={label:e[0][e[9]].label,placeholder:e[0][e[9]].label};return void 0!==e[0][e[9]].value&&(r.value=e[0][e[9]].value),t=new L({props:r}),P.push((()=>N(t,"value",s))),{c(){c(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){f(t,e,a),l=!0},p(l,s){e=l;const r={};1&s&&(r.label=e[0][e[9]].label),1&s&&(r.placeholder=e[0][e[9]].label),!a&&1&s&&(a=!0,r.value=e[0][e[9]].value,A((()=>a=!1))),t.$set(r)},i(e){l||(i(t.$$.fragment,e),l=!0)},o(e){$(t.$$.fragment,e),l=!1},d(e){m(t,e)}}}function X(e){let t,a,l,s;const r=[W,Q],n=[];function o(e,t){return"type"in e[0][e[9]]?1:0}return t=o(e),a=n[t]=r[t](e),{c(){a.c(),l=g()},l(e){a.l(e),l=g()},m(e,a){n[t].m(e,a),k(e,l,a),s=!0},p(e,s){let c=t;t=o(e),t===c?n[t].p(e,s):(x(),$(n[c],1,1,(()=>{n[c]=null})),O(),a=n[t],a?a.p(e,s):(a=n[t]=r[t](e),a.c()),i(a,1),a.m(l.parentNode,l))},i(e){s||(i(a),s=!0)},o(e){$(a),s=!1},d(e){n[t].d(e),e&&y(l)}}}function Y(e){let t;return{c(){t=B("Save")},l(e){t=I(e,"Save")},m(e,a){k(e,t,a)},d(e){e&&y(t)}}}function Z(e){let t,a,l,s,r,n,o;a=new U({});const p=[V,T],S=[];function q(e,t){return e[1]?0:1}return s=q(e),r=S[s]=p[s](e),{c(){t=d("div"),c(a.$$.fragment),l=h(),r.c(),n=g(),this.h()},l(e){t=b(e,"DIV",{class:!0});var s=v(t);u(a.$$.fragment,s),s.forEach(y),l=j(e),r.l(e),n=g(),this.h()},h(){w(t,"class","flex")},m(e,r){k(e,t,r),f(a,t,null),k(e,l,r),S[s].m(e,r),k(e,n,r),o=!0},p(e,t){let a=s;s=q(e),s===a?S[s].p(e,t):(x(),$(S[a],1,1,(()=>{S[a]=null})),O(),r=S[s],r?r.p(e,t):(r=S[s]=p[s](e),r.c()),i(r,1),r.m(n.parentNode,n))},i(e){o||(i(a.$$.fragment,e),i(r),o=!0)},o(e){$(a.$$.fragment,e),$(r),o=!1},d(e){e&&y(t),m(a),e&&y(l),S[s].d(e),e&&y(n)}}}function ee(e){let t,a;return t=new M({props:{$$slots:{default:[Z]},$$scope:{ctx:e}}}),{c(){c(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,l){f(t,e,l),a=!0},p(e,[a]){const l={};4103&a&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){a||(i(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){m(t,e)}}}async function te({page:e}){let{query:t}=e;return t=Object.fromEntries(t),{props:{query:t}}}function ae(e,r,n){const o=async()=>{const e=await C("/api/datatable/roles");n(2,i.roles=e.rows.map((e=>e.name)),i)},c=async()=>{const e=await C(`/api/datatable/users?_id=${$._id}`);Object.keys(u).forEach((t=>{n(0,u[t].value=e.rows[0][t],u)}))};let u=D.reduce(((e,r)=>(e[r.key]=((e,r)=>{for(var n in r||(r={}))a.call(r,n)&&s(e,n,r[n]);if(t)for(var n of t(r))l.call(r,n)&&s(e,n,r[n]);return e})({label:r.title,value:""},r),e)),{}),f=!1,i={roles:[],status:[{label:"Active",value:"Active"},{label:"Unverified",value:"Unverified"}]},{query:$}=r;return p((async()=>{await Promise.all([o(),c()]),n(1,f=!0)})),e.$$set=e=>{"query"in e&&n(4,$=e.query)},[u,f,i,async()=>{K.spinner.show();const e=Object.keys(u).reduce(((e,t)=>(e[t]=u[t].value,e)),{});await C({method:"PATCH",href:`/api/datatable/users?_id=${$._id}`,body:e}),K.spinner.hide(),K.success.show(`Successfully updated user "${u.firstName.value} ${u.lastName.value}"`)},$,function(t,a){e.$$.not_equal(u[a].value,t)&&(u[a].value=t,n(0,u))},function(t,a){e.$$.not_equal(u[a].value,t)&&(u[a].value=t,n(0,u))}]}export default class extends r{constructor(e){super(),n(this,e,ae,ee,o,{query:4})}}export{te as load};
