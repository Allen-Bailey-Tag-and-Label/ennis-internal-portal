import{S as t,i as e,s,j as n,m as a,o,v as r,r as l,w as c,l as f,f as u,d as $,e as m,k as i,c as p,a as h,n as d,b as g,D as y,E as k,K as b,B as v,u as x,H as j,$ as w,t as S,g as q,I as A,J as B,L as M}from"../../../chunks/vendor-483ca6b6.js";import{s as H}from"../../../chunks/auth-c13ad024.js";import{c as I}from"../../../chunks/_columns-aa0cd4b4.js";import{B as E}from"../../../chunks/store-97111950.js";import{B as _}from"../../../chunks/Back-7e1bfb8e.js";import{S as D}from"../../../chunks/Select-2b3a6ae9.js";import{m as F}from"../../../chunks/store-b327666d.js";import{I as J}from"../../../chunks/Input-ac9b94d3.js";import{S as K}from"../../../chunks/Section-69710e66.js";import"../../../chunks/store-a8f0f898.js";function L(t,e,s){const n=t.slice();return n[4]=e[s].key,n[5]=e[s].title,n[6]=w(e[s],["key","title"]),n[7]=e,n[8]=s,n}function N(t){let e,s,f;function u(e){t[3](e,t[4])}let $={label:t[5],placeholder:t[5]};return void 0!==t[0][t[4]]&&($.value=t[0][t[4]]),e=new J({props:$}),A.push((()=>B(e,"value",u))),{c(){n(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){o(e,t,s),f=!0},p(n,a){t=n;const o={};!s&&1&a&&(s=!0,o.value=t[0][t[4]],M((()=>s=!1))),e.$set(o)},i(t){f||(r(e.$$.fragment,t),f=!0)},o(t){l(e.$$.fragment,t),f=!1},d(t){c(e,t)}}}function O(t){let e,s,n=("Month"===t[5]&&"At Hire"!==t[0].frequency||"Month"!==t[5])&&R(t);return{c(){n&&n.c(),e=f()},l(t){n&&n.l(t),e=f()},m(t,a){n&&n.m(t,a),u(t,e,a),s=!0},p(t,s){"Month"===t[5]&&"At Hire"!==t[0].frequency||"Month"!==t[5]?n?(n.p(t,s),1&s&&r(n,1)):(n=R(t),n.c(),r(n,1),n.m(e.parentNode,e)):n&&(v(),l(n,1,1,(()=>{n=null})),x())},i(t){s||(r(n),s=!0)},o(t){l(n),s=!1},d(t){n&&n.d(t),t&&$(e)}}}function R(t){let e,s,f;function u(e){t[2](e,t[4])}let $={label:t[5],options:t[6].options};return void 0!==t[0][t[4]]&&($.value=t[0][t[4]]),e=new D({props:$}),A.push((()=>B(e,"value",u))),{c(){n(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){o(e,t,s),f=!0},p(n,a){t=n;const o={};!s&&1&a&&(s=!0,o.value=t[0][t[4]],M((()=>s=!1))),e.$set(o)},i(t){f||(r(e.$$.fragment,t),f=!0)},o(t){l(e.$$.fragment,t),f=!1},d(t){c(e,t)}}}function V(t){let e,s,n,a;const o=[O,N],c=[];return e="type"in t[6]?0:1,s=c[e]=o[e](t),{c(){s.c(),n=f()},l(t){s.l(t),n=f()},m(t,s){c[e].m(t,s),u(t,n,s),a=!0},p(t,e){s.p(t,e)},i(t){a||(r(s),a=!0)},o(t){l(s),a=!1},d(t){c[e].d(t),t&&$(n)}}}function z(t){let e;return{c(){e=S("Add")},l(t){e=q(t,"Add")},m(t,s){u(t,e,s)},d(t){t&&$(e)}}}function C(t){let e,s,f,w,S,q,A,B,M;s=new _({});let H=I,D=[];for(let n=0;n<H.length;n+=1)D[n]=V(L(t,H,n));const F=t=>l(D[t],1,1,(()=>{D[t]=null}));return q=new E({props:{type:"submit",$$slots:{default:[z]},$$scope:{ctx:t}}}),{c(){e=m("div"),n(s.$$.fragment),f=i(),w=m("form");for(let t=0;t<D.length;t+=1)D[t].c();S=i(),n(q.$$.fragment),this.h()},l(t){e=p(t,"DIV",{class:!0});var n=h(e);a(s.$$.fragment,n),n.forEach($),f=d(t),w=p(t,"FORM",{class:!0});var o=h(w);for(let e=0;e<D.length;e+=1)D[e].l(o);S=d(o),a(q.$$.fragment,o),o.forEach($),this.h()},h(){g(e,"class","flex"),g(w,"class","flex flex-col mt-[24px] space-y-[16px] max-w-[500px] w-full mx-auto")},m(n,a){u(n,e,a),o(s,e,null),u(n,f,a),u(n,w,a);for(let t=0;t<D.length;t+=1)D[t].m(w,null);y(w,S),o(q,w,null),A=!0,B||(M=k(w,"submit",b(t[1])),B=!0)},p(t,e){if(1&e){let s;for(H=I,s=0;s<H.length;s+=1){const n=L(t,H,s);D[s]?(D[s].p(n,e),r(D[s],1)):(D[s]=V(n),D[s].c(),r(D[s],1),D[s].m(w,S))}for(v(),s=H.length;s<D.length;s+=1)F(s);x()}const s={};512&e&&(s.$$scope={dirty:e,ctx:t}),q.$set(s)},i(t){if(!A){r(s.$$.fragment,t);for(let t=0;t<H.length;t+=1)r(D[t]);r(q.$$.fragment,t),A=!0}},o(t){l(s.$$.fragment,t),D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)l(D[e]);l(q.$$.fragment,t),A=!1},d(t){t&&$(e),c(s),t&&$(f),t&&$(w),j(D,t),c(q),B=!1,M()}}}function G(t){let e,s;return e=new K({props:{$$slots:{default:[C]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,n){o(e,t,n),s=!0},p(t,[s]){const n={};513&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(r(e.$$.fragment,t),s=!0)},o(t){l(e.$$.fragment,t),s=!1},d(t){c(e,t)}}}function P(t,e,s){let n=[...I].reduce(((t,e)=>(t[e.key]="select"===e.type?e.options[0].value:"",t)),{});return t.$$.update=()=>{1&t.$$.dirty&&"At Hire"===n.frequency&&s(0,n.month="",n)},[n,async()=>{F.spinner.show(),await H({method:"post",href:"/api/datatable/safety-types",body:n}),F.spinner.hide(),F.success.show(`Successfully added safety type "${n.name}"`)},function(e,a){t.$$.not_equal(n[a],e)&&(n[a]=e,s(0,n))},function(e,a){t.$$.not_equal(n[a],e)&&(n[a]=e,s(0,n))}]}export default class extends t{constructor(t){super(),e(this,t,P,G,s,{})}}
