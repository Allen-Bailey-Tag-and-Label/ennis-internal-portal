import{S as e,i as t,s,j as n,m as r,o as a,v as o,r as c,w as l,z as f,e as $,k as u,l as m,c as i,a as p,d as h,n as d,b as g,f as y,B as b,u as w,L as x,D as j,E as k,K as v,H as S,I as q,J as _,t as B,g as E}from"../../../chunks/vendor-483ca6b6.js";import{s as I}from"../../../chunks/auth-c13ad024.js";import{B as O}from"../../../chunks/store-97111950.js";import{B as C}from"../../../chunks/Back-7e1bfb8e.js";import{C as D,S as H}from"../../../chunks/Spinner-460fa24f.js";import{m as P}from"../../../chunks/store-b327666d.js";import{I as z}from"../../../chunks/Input-ac9b94d3.js";import{S as A}from"../../../chunks/Section-69710e66.js";import"../../../chunks/store-a8f0f898.js";function F(e,t,s){const n=e.slice();return n[6]=t[s],n[7]=t,n[8]=s,n}function J(e){let t,s;return t=new D({props:{$$slots:{default:[L]},$$scope:{ctx:e}}}),{c(){n(t.$$.fragment)},l(e){r(t.$$.fragment,e)},m(e,n){a(t,e,n),s=!0},p(e,s){const n={};512&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(o(t.$$.fragment,e),s=!0)},o(e){c(t.$$.fragment,e),s=!1},d(e){l(t,e)}}}function K(e){let t,s,f,m,x,q,_=Object.keys(e[0]),B=[];for(let n=0;n<_.length;n+=1)B[n]=M(F(e,_,n));const E=e=>c(B[e],1,1,(()=>{B[e]=null}));return f=new O({props:{type:"submit",$$slots:{default:[N]},$$scope:{ctx:e}}}),{c(){t=$("form");for(let e=0;e<B.length;e+=1)B[e].c();s=u(),n(f.$$.fragment),this.h()},l(e){t=i(e,"FORM",{class:!0});var n=p(t);for(let t=0;t<B.length;t+=1)B[t].l(n);s=d(n),r(f.$$.fragment,n),n.forEach(h),this.h()},h(){g(t,"class","flex flex-col mt-[24px] space-y-[16px]")},m(n,r){y(n,t,r);for(let e=0;e<B.length;e+=1)B[e].m(t,null);j(t,s),a(f,t,null),m=!0,x||(q=k(t,"submit",v(e[2])),x=!0)},p(e,n){if(1&n){let r;for(_=Object.keys(e[0]),r=0;r<_.length;r+=1){const a=F(e,_,r);B[r]?(B[r].p(a,n),o(B[r],1)):(B[r]=M(a),B[r].c(),o(B[r],1),B[r].m(t,s))}for(b(),r=_.length;r<B.length;r+=1)E(r);w()}const r={};512&n&&(r.$$scope={dirty:n,ctx:e}),f.$set(r)},i(e){if(!m){for(let e=0;e<_.length;e+=1)o(B[e]);o(f.$$.fragment,e),m=!0}},o(e){B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)c(B[t]);c(f.$$.fragment,e),m=!1},d(e){e&&h(t),S(B,e),l(f),x=!1,q()}}}function L(e){let t,s;return t=new H({}),{c(){n(t.$$.fragment)},l(e){r(t.$$.fragment,e)},m(e,n){a(t,e,n),s=!0},i(e){s||(o(t.$$.fragment,e),s=!0)},o(e){c(t.$$.fragment,e),s=!1},d(e){l(t,e)}}}function M(e){let t,s,f;function $(t){e[4](t,e[6])}let u={label:e[6],placeholder:e[6]};return void 0!==e[0][e[6]]&&(u.value=e[0][e[6]]),t=new z({props:u}),q.push((()=>_(t,"value",$))),{c(){n(t.$$.fragment)},l(e){r(t.$$.fragment,e)},m(e,s){a(t,e,s),f=!0},p(n,r){e=n;const a={};1&r&&(a.label=e[6]),1&r&&(a.placeholder=e[6]),!s&&1&r&&(s=!0,a.value=e[0][e[6]],x((()=>s=!1))),t.$set(a)},i(e){f||(o(t.$$.fragment,e),f=!0)},o(e){c(t.$$.fragment,e),f=!1},d(e){l(t,e)}}}function N(e){let t;return{c(){t=B("Save")},l(e){t=E(e,"Save")},m(e,s){y(e,t,s)},d(e){e&&h(t)}}}function R(e){let t,s,f,x,j,k,v;s=new C({});const S=[K,J],q=[];function _(e,t){return e[1]?0:1}return x=_(e),j=q[x]=S[x](e),{c(){t=$("div"),n(s.$$.fragment),f=u(),j.c(),k=m(),this.h()},l(e){t=i(e,"DIV",{class:!0});var n=p(t);r(s.$$.fragment,n),n.forEach(h),f=d(e),j.l(e),k=m(),this.h()},h(){g(t,"class","flex")},m(e,n){y(e,t,n),a(s,t,null),y(e,f,n),q[x].m(e,n),y(e,k,n),v=!0},p(e,t){let s=x;x=_(e),x===s?q[x].p(e,t):(b(),c(q[s],1,1,(()=>{q[s]=null})),w(),j=q[x],j?j.p(e,t):(j=q[x]=S[x](e),j.c()),o(j,1),j.m(k.parentNode,k))},i(e){v||(o(s.$$.fragment,e),o(j),v=!0)},o(e){c(s.$$.fragment,e),c(j),v=!1},d(e){e&&h(t),l(s),e&&h(f),q[x].d(e),e&&h(k)}}}function T(e){let t,s;return t=new A({props:{$$slots:{default:[R]},$$scope:{ctx:e}}}),{c(){n(t.$$.fragment)},l(e){r(t.$$.fragment,e)},m(e,n){a(t,e,n),s=!0},p(e,[s]){const n={};515&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(o(t.$$.fragment,e),s=!0)},o(e){c(t.$$.fragment,e),s=!1},d(e){l(t,e)}}}async function V({page:e}){let{query:t}=e;return t=Object.fromEntries(t),{props:{query:t}}}function G(e,t,s){const n=async()=>{const e=await I(`/api/datatable/routes?_id=${o._id}`);delete e.rows[0]._id,s(0,r=e.rows[0])};let r={group:"",name:"",href:""},a=!1,{query:o}=t;return f((async()=>{await Promise.all([n()]),s(1,a=!0)})),e.$$set=e=>{"query"in e&&s(3,o=e.query)},[r,a,async()=>{P.spinner.show();const e={name:r.name,href:r.href};""!==r.group&&(e.group=r.group),await I({method:"PATCH",href:`/api/datatable/routes?_id=${o._id}`,body:e}),P.spinner.hide(),P.success.show(`Successfully updated route "${r.name}"`)},o,function(t,n){e.$$.not_equal(r[n],t)&&(r[n]=t,s(0,r))}]}export default class extends e{constructor(e){super(),t(this,e,G,T,s,{query:3})}}export{V as load};
