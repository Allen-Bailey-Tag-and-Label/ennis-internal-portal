import{S as t,i as e,s as n,j as l,m as s,o as r,v as a,r as c,w as o,M as i,z as $,l as f,f as h,B as d,u as m,d as u,e as p,k as g,c as y,a as v,n as x,b as w,D as b,a0 as k,a7 as E,a8 as j,G as D,V as T,ac as N,ad as _,ae as I,L as M,t as V,g as F,h as H,H as S,$ as B,I as C,J as O}from"./vendor-483ca6b6.js";import{p as A}from"./stores-91ba20f1.js";import{s as J}from"./auth-c13ad024.js";import{g as L,s as q,I as z}from"./_transitions-34f54501.js";import{C as G,S as P}from"./Spinner-460fa24f.js";import{C as R}from"./Checkbox-6f8586bf.js";import{T as Y}from"./Table-c26e4894.js";import{m as K}from"./store-b327666d.js";function Q(t,e,n){const l=t.slice();return l[29]=e[n].title,l}function U(t,e,n){const l=t.slice();return l[22]=e[n],l[23]=e,l[24]=n,l}function W(t,e,n){const l=t.slice();return l[25]=e[n].key,l[26]=B(e[n],["key"]),l}function X(t){let e,n,i,$=t[1]&&tt(t);return n=new Y({props:{$$slots:{tbody:[ut],thead:[ot]},$$scope:{ctx:t}}}),{c(){$&&$.c(),e=g(),l(n.$$.fragment)},l(t){$&&$.l(t),e=x(t),s(n.$$.fragment,t)},m(t,l){$&&$.m(t,l),h(t,e,l),r(n,t,l),i=!0},p(t,l){t[1]?$?($.p(t,l),2&l[0]&&a($,1)):($=tt(t),$.c(),a($,1),$.m(e.parentNode,e)):$&&(d(),c($,1,1,(()=>{$=null})),m());const s={};167&l[0]|2&l[1]&&(s.$$scope={dirty:l,ctx:t}),n.$set(s)},i(t){i||(a($),a(n.$$.fragment,t),i=!0)},o(t){c($),c(n.$$.fragment,t),i=!1},d(t){$&&$.d(t),t&&u(e),o(n,t)}}}function Z(t){let e,n;return e=new P({}),{c(){l(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,l){r(e,t,l),n=!0},p:D,i(t){n||(a(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){o(e,t)}}}function tt(t){let e,n,i,$,f,k,E=t[9]&&et(t),j=t[8]&&lt(t);return f=new z({props:{type:"link",href:`${t[3].path}/add`,$$slots:{default:[rt]},$$scope:{ctx:t}}}),{c(){e=p("div"),n=p("div"),E&&E.c(),i=g(),j&&j.c(),$=g(),l(f.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0});var l=v(e);n=y(l,"DIV",{class:!0});var r=v(n);E&&E.l(r),i=x(r),j&&j.l(r),$=x(r),s(f.$$.fragment,r),r.forEach(u),l.forEach(u),this.h()},h(){w(n,"class","flex space-x-[8px]"),w(e,"class","flex justify-end w-full")},m(t,l){h(t,e,l),b(e,n),E&&E.m(n,null),b(n,i),j&&j.m(n,null),b(n,$),r(f,n,null),k=!0},p(t,e){t[9]?E?(E.p(t,e),512&e[0]&&a(E,1)):(E=et(t),E.c(),a(E,1),E.m(n,i)):E&&(d(),c(E,1,1,(()=>{E=null})),m()),t[8]?j?(j.p(t,e),256&e[0]&&a(j,1)):(j=lt(t),j.c(),a(j,1),j.m(n,$)):j&&(d(),c(j,1,1,(()=>{j=null})),m());const l={};8&e[0]&&(l.href=`${t[3].path}/add`),2&e[1]&&(l.$$scope={dirty:e,ctx:t}),f.$set(l)},i(t){k||(a(E),a(j),a(f.$$.fragment,t),k=!0)},o(t){c(E),c(j),c(f.$$.fragment,t),k=!1},d(t){t&&u(e),E&&E.d(),j&&j.d(),o(f)}}}function et(t){let e,n,i,$,f;return n=new z({props:{type:"link",href:t[6],theme:"secondary",$$slots:{default:[nt]},$$scope:{ctx:t}}}),{c(){e=p("div"),l(n.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0});var l=v(e);s(n.$$.fragment,l),l.forEach(u),this.h()},h(){w(e,"class","flex")},m(t,l){h(t,e,l),r(n,e,null),f=!0},p(t,e){const l={};64&e[0]&&(l.href=t[6]),2&e[1]&&(l.$$scope={dirty:e,ctx:t}),n.$set(l)},i(t){f||(a(n.$$.fragment,t),k((()=>{$&&$.end(1),i||(i=E(e,L,{})),i.start()})),f=!0)},o(t){c(n.$$.fragment,t),i&&i.invalidate(),$=j(e,q,{}),f=!1},d(t){t&&u(e),o(n),t&&$&&$.end()}}}function nt(t){let e,n;return e=new T({props:{src:N,class:"w-[24px] h-[24px]"}}),{c(){l(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,l){r(e,t,l),n=!0},p:D,i(t){n||(a(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){o(e,t)}}}function lt(t){let e,n,i,$,f;return n=new z({props:{theme:"error",$$slots:{default:[st]},$$scope:{ctx:t}}}),n.$on("click",t[11]),{c(){e=p("div"),l(n.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0});var l=v(e);s(n.$$.fragment,l),l.forEach(u),this.h()},h(){w(e,"class","flex")},m(t,l){h(t,e,l),r(n,e,null),f=!0},p(t,e){const l={};2&e[1]&&(l.$$scope={dirty:e,ctx:t}),n.$set(l)},i(t){f||(a(n.$$.fragment,t),k((()=>{$&&$.end(1),i||(i=E(e,L,{})),i.start()})),f=!0)},o(t){c(n.$$.fragment,t),i&&i.invalidate(),$=j(e,q,{}),f=!1},d(t){t&&u(e),o(n),t&&$&&$.end()}}}function st(t){let e,n;return e=new T({props:{src:_,class:"w-[24px] h-[24px]"}}),{c(){l(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,l){r(e,t,l),n=!0},p:D,i(t){n||(a(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){o(e,t)}}}function rt(t){let e,n;return e=new T({props:{src:I,class:"w-[24px] h-[24px]"}}),{c(){l(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,l){r(e,t,l),n=!0},p:D,i(t){n||(a(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){o(e,t)}}}function at(t){let e,n,i,$,f;function d(e){t[18](e)}function m(e){t[19](e)}let g={};return void 0!==t[5]&&(g.checked=t[5]),void 0!==t[7]&&(g.indeterminate=t[7]),n=new R({props:g}),C.push((()=>O(n,"checked",d))),C.push((()=>O(n,"indeterminate",m))),n.$on("change",t[10]),{c(){e=p("th"),l(n.$$.fragment),this.h()},l(t){e=y(t,"TH",{class:!0});var l=v(e);s(n.$$.fragment,l),l.forEach(u),this.h()},h(){w(e,"class",yt+" w-[24px]")},m(t,l){h(t,e,l),r(n,e,null),f=!0},p(t,e){const l={};!i&&32&e[0]&&(i=!0,l.checked=t[5],M((()=>i=!1))),!$&&128&e[0]&&($=!0,l.indeterminate=t[7],M((()=>$=!1))),n.$set(l)},i(t){f||(a(n.$$.fragment,t),f=!0)},o(t){c(n.$$.fragment,t),f=!1},d(t){t&&u(e),o(n)}}}function ct(t){let e,n,l=t[29]+"";return{c(){e=p("th"),n=V(l),this.h()},l(t){e=y(t,"TH",{class:!0});var s=v(e);n=F(s,l),s.forEach(u),this.h()},h(){w(e,"class",yt)},m(t,l){h(t,e,l),b(e,n)},p(t,e){1&e[0]&&l!==(l=t[29]+"")&&H(n,l)},d(t){t&&u(e)}}}function ot(t){let e,n,l,s=t[1]&&at(t),r=t[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=ct(Q(t,r,a));return{c(){e=p("thead"),s&&s.c(),n=g();for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){e=y(t,"THEAD",{slot:!0});var l=v(e);s&&s.l(l),n=x(l);for(let e=0;e<o.length;e+=1)o[e].l(l);l.forEach(u),this.h()},h(){w(e,"slot","thead")},m(t,r){h(t,e,r),s&&s.m(e,null),b(e,n);for(let n=0;n<o.length;n+=1)o[n].m(e,null);l=!0},p(t,l){if(t[1]?s?(s.p(t,l),2&l[0]&&a(s,1)):(s=at(t),s.c(),a(s,1),s.m(e,n)):s&&(d(),c(s,1,1,(()=>{s=null})),m()),1&l[0]){let n;for(r=t[0],n=0;n<r.length;n+=1){const s=Q(t,r,n);o[n]?o[n].p(s,l):(o[n]=ct(s),o[n].c(),o[n].m(e,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i(t){l||(a(s),l=!0)},o(t){c(s),l=!1},d(t){t&&u(e),s&&s.d(),S(o,t)}}}function it(t){let e,n,i,$;function f(e){t[16](e,t[22])}let d={};return void 0!==t[22].checked&&(d.checked=t[22].checked),n=new R({props:d}),C.push((()=>O(n,"checked",f))),{c(){e=p("td"),l(n.$$.fragment),this.h()},l(t){e=y(t,"TD",{class:!0});var l=v(e);s(n.$$.fragment,l),l.forEach(u),this.h()},h(){w(e,"class",yt)},m(t,l){h(t,e,l),r(n,e,null),$=!0},p(e,l){t=e;const s={};!i&&4&l[0]&&(i=!0,s.checked=t[22].checked,M((()=>i=!1))),n.$set(s)},i(t){$||(a(n.$$.fragment,t),$=!0)},o(t){c(n.$$.fragment,t),$=!1},d(t){t&&u(e),o(n)}}}function $t(t){let e;function n(t,e){return"options"in t[26]?ht:ft}let l=n(t),s=l(t);return{c(){s.c(),e=f()},l(t){s.l(t),e=f()},m(t,n){s.m(t,n),h(t,e,n)},p(t,r){l===(l=n(t))&&s?s.p(t,r):(s.d(1),s=l(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&u(e)}}}function ft(t){let e,n=(t[25]in t[22]?t[22][t[25]]:"")+"";return{c(){e=V(n)},l(t){e=F(t,n)},m(t,n){h(t,e,n)},p(t,l){5&l[0]&&n!==(n=(t[25]in t[22]?t[22][t[25]]:"")+"")&&H(e,n)},d(t){t&&u(e)}}}function ht(t){var e,n;let l,s=(null!=(n=null==(e=t[26].options.filter(r)[0])?void 0:e.label)?n:"")+"";function r(...e){return t[17](t[22],t[25],...e)}return{c(){l=V(s)},l(t){l=F(t,s)},m(t,e){h(t,l,e)},p(e,n){var a,c;t=e,5&n[0]&&s!==(s=(null!=(c=null==(a=t[26].options.filter(r)[0])?void 0:a.label)?c:"")+"")&&H(l,s)},d(t){t&&u(l)}}}function dt(t){let e,n=t[25]in t[22]&&$t(t);return{c(){e=p("td"),n&&n.c(),this.h()},l(t){e=y(t,"TD",{class:!0});var l=v(e);n&&n.l(l),l.forEach(u),this.h()},h(){w(e,"class",yt)},m(t,l){h(t,e,l),n&&n.m(e,null)},p(t,l){t[25]in t[22]?n?n.p(t,l):(n=$t(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(t){t&&u(e),n&&n.d()}}}function mt(t){let e,n,l,s,r,o=t[1]&&it(t),i=t[0],$=[];for(let a=0;a<i.length;a+=1)$[a]=dt(W(t,i,a));return{c(){e=p("tr"),o&&o.c(),n=g();for(let t=0;t<$.length;t+=1)$[t].c();l=g(),this.h()},l(t){e=y(t,"TR",{id:!0,class:!0});var s=v(e);o&&o.l(s),n=x(s);for(let e=0;e<$.length;e+=1)$[e].l(s);l=x(s),s.forEach(u),this.h()},h(){w(e,"id",s=t[22]._id),w(e,"class","rounded transition duration-200 bg-white bg-opacity-0 hover:bg-opacity-[2%]")},m(t,s){h(t,e,s),o&&o.m(e,null),b(e,n);for(let n=0;n<$.length;n+=1)$[n].m(e,null);b(e,l),r=!0},p(t,f){if(t[1]?o?(o.p(t,f),2&f[0]&&a(o,1)):(o=it(t),o.c(),a(o,1),o.m(e,n)):o&&(d(),c(o,1,1,(()=>{o=null})),m()),5&f[0]){let n;for(i=t[0],n=0;n<i.length;n+=1){const s=W(t,i,n);$[n]?$[n].p(s,f):($[n]=dt(s),$[n].c(),$[n].m(e,l))}for(;n<$.length;n+=1)$[n].d(1);$.length=i.length}(!r||4&f[0]&&s!==(s=t[22]._id))&&w(e,"id",s)},i(t){r||(a(o),r=!0)},o(t){c(o),r=!1},d(t){t&&u(e),o&&o.d(),S($,t)}}}function ut(t){let e,n,l=t[2],s=[];for(let a=0;a<l.length;a+=1)s[a]=mt(U(t,l,a));const r=t=>c(s[t],1,1,(()=>{s[t]=null}));return{c(){e=p("tbody");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=y(t,"TBODY",{slot:!0});var n=v(e);for(let e=0;e<s.length;e+=1)s[e].l(n);n.forEach(u),this.h()},h(){w(e,"slot","tbody")},m(t,l){h(t,e,l);for(let n=0;n<s.length;n+=1)s[n].m(e,null);n=!0},p(t,n){if(7&n[0]){let c;for(l=t[2],c=0;c<l.length;c+=1){const r=U(t,l,c);s[c]?(s[c].p(r,n),a(s[c],1)):(s[c]=mt(r),s[c].c(),a(s[c],1),s[c].m(e,null))}for(d(),c=l.length;c<s.length;c+=1)r(c);m()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)a(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)c(s[e]);n=!1},d(t){t&&u(e),S(s,t)}}}function pt(t){let e,n,l,s;const r=[Z,X],o=[];function i(t,e){return t[4]?1:0}return e=i(t),n=o[e]=r[e](t),{c(){n.c(),l=f()},l(t){n.l(t),l=f()},m(t,n){o[e].m(t,n),h(t,l,n),s=!0},p(t,s){let $=e;e=i(t),e===$?o[e].p(t,s):(d(),c(o[$],1,1,(()=>{o[$]=null})),m(),n=o[e],n?n.p(t,s):(n=o[e]=r[e](t),n.c()),a(n,1),n.m(l.parentNode,l))},i(t){s||(a(n),s=!0)},o(t){c(n),s=!1},d(t){o[e].d(t),t&&u(l)}}}function gt(t){let e,n;return e=new G({props:{class:"items-center space-y-[16px]",$$slots:{default:[pt]},$$scope:{ctx:t}}}),{c(){l(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,l){r(e,t,l),n=!0},p(t,n){const l={};1023&n[0]|2&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(a(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){o(e,t)}}}const yt="p-[10px]";function vt(t,e,n){let l,s,r,a,c,o,f;i(t,A,(t=>n(3,f=t)));const h=async()=>{K.spinner.show(),await Promise.all([l.map((async({_id:t})=>{await J({method:"DELETE",href:`/api/datatable/${m}?_id=${t}`})}))]),await d(),K.spinner.hide()},d=async()=>{const t=await J(`/api/datatable/${m}?sort=${JSON.stringify(y)}`);n(2,x=t.rows.map((t=>Object.assign({checked:!1},t))))};let{collection:m=""}=e,{deleteModalFN:u=(t=>t[p[0].key])}=e,{columns:p=[]}=e,{editable:g=!1}=e,{sort:y={}}=e,v=!1,x=[];$((async()=>{await d(),n(4,v=!0)}));return t.$$set=t=>{"collection"in t&&n(12,m=t.collection),"deleteModalFN"in t&&n(13,u=t.deleteModalFN),"columns"in t&&n(0,p=t.columns),"editable"in t&&n(1,g=t.editable),"sort"in t&&n(14,y=t.sort)},t.$$.update=()=>{4&t.$$.dirty[0]&&n(15,l=[...x].filter((t=>t.checked))),32772&t.$$.dirty[0]&&n(5,s=l.length===x.length),32776&t.$$.dirty[0]&&n(6,r=1===l.length?`${f.path}/edit?_id=${l[0]._id}`:""),32772&t.$$.dirty[0]&&n(7,a=0!==l.length&&l.length!==x.length),32768&t.$$.dirty[0]&&n(8,c=l.length>0),32768&t.$$.dirty[0]&&n(9,o=1===l.length)},[p,g,x,f,v,s,r,a,c,o,()=>{n(2,x=x.map((t=>(t.checked=!s,t))))},()=>{K.confirmation.show(`Are you sure you want to delete ${l.map((t=>u(t))).join(", ")}?`,h)},m,u,y,l,function(e,l){t.$$.not_equal(l.checked,e)&&(l.checked=e,n(2,x))},(t,e,n)=>n.value===t[e],function(t){s=t,n(5,s),n(15,l),n(2,x)},function(t){a=t,n(7,a),n(15,l),n(2,x)}]}class xt extends t{constructor(t){super(),e(this,t,vt,gt,n,{collection:12,deleteModalFN:13,columns:0,editable:1,sort:14},[-1,-1])}}export{xt as D};
