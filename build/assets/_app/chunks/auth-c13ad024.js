import{C as e}from"./vendor-483ca6b6.js";const t=e=>Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"),n=async e=>{let t,n,o;"string"==typeof e?(n=e,o="GET"):(t=e.body,n=e.href,o=e.method);let s={method:o};"GET"!==o.toUpperCase()&&(s.body=JSON.stringify(t),s.headers={Accept:"application/json","Content-Type":"application/json"});const a=await fetch(n,s);return await a.json()},o=((t,o=null)=>{let s;s="undefined"!=typeof localStorage?JSON.parse(localStorage.getItem(t)||JSON.stringify(o)):[];const{set:a,subscribe:r,update:i}=e(s);"undefined"!=typeof localStorage&&r((e=>{localStorage.setItem(t,JSON.stringify(e))}));return{is:{signedin:()=>{let e;return r((t=>e="{}"!==JSON.stringify(t))),e}},on:{signin:()=>{let e;return r((t=>{var n;return e=null==(n=null==t?void 0:t.on)?void 0:n.signin})),e}},signin:async e=>{const t=await n({method:"POST",href:"/api/auth/signin",body:e});return t.accessToken&&i((()=>t.accessToken)),t.error&&i((()=>null)),t},signout:()=>{i((()=>null))},subscribe:r}})("accessToken",null),s=async(e,t,o)=>await n({method:"POST",href:"/api/auth/changepassword",body:{accessToken:e,currentPassword:t,password:o}}),a=async e=>(await n({method:"POST",href:"/api/auth/get/signinroute",body:{accessToken:e}})).route,r=async e=>(await n({method:"POST",href:"/api/auth/get/userroutes",body:{accessToken:e}})).routes;export{o as a,a as b,s as c,r as g,t as o,n as s};
